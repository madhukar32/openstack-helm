# Copyright 2017 The Openstack-Helm Authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# MVP values for neutron.
# This file contains overrides to launch a MVP deployment of neutron for the
# OpenStack-Helm gates, and local development use. It should be
# kept to the bare minimum required for this purpose.

network:
  backend: opencontrail
  interface:
    tunnel: docker0

images:
  tags:
    plugin: localhost:5000/contrail-openstack-neutron-contrail-backend:4.0.2.0-35
    # For opencontrail, use below metadata image
    metadata: docker.io/kolla/ubuntu-binary-neutron-metadata-agent:3.0.3

dependencies:
  server:
    daemonset:
      - contrail-config
  metadata:
    daemonset:
      - contrail-agent

conf:
  neutron:
    DEFAULT:
      core_plugin: neutron_plugin_contrail.plugins.opencontrail.contrail_plugin.NeutronPluginContrailCoreV2
      service_plugins: neutron_plugin_contrail.plugins.opencontrail.loadbalancer.v2.plugin.LoadBalancerPluginV2
      l3_ha: False
      api_extensions_path: /opt/plugin/site-packages/neutron_plugin_contrail/extensions:/opt/plugin/site-packages/neutron_lbaas/extensions
      interface_driver:
    quotas:
      quota_driver: neutron_plugin_contrail.plugins.opencontrail.quota.driver.QuotaDriver
  plugins:
    neutron_plugin_framework: opencontrail
    neutron_plugin_conf: ContrailPlugin.ini
    opencontrail:
      APISERVER:
        # IP-s can be provided via '--set' option of 'helm install' command
        #api_server_ip: 10.87.65.153
        api_server_port: 8082
        contrail_extensions: "ipam:neutron_plugin_contrail.plugins.opencontrail.contrail_plugin_ipam.NeutronPluginContrailIpam,policy:neutron_plugin_contrail.plugins.opencontrail.contrail_plugin_policy.NeutronPluginContrailPolicy,route-table:neutron_plugin_contrail.plugins.opencontrail.contrail_plugin_vpc.NeutronPluginContrailVpc,contrail:None,service-interface:None,vf-binding:None"
        multi_tenancy: True
      COLLECTOR:
        # IP-s can be provided via '--set' option of 'helm install' command
        #analytics_api_ip: 10.87.65.153
        analytics_api_port: 8081
      KEYSTONE:
        admin_user: admin
        admin_password: password
        admin_tenant_name: admin
        auth_user: admin

manifests:
  daemonset_dhcp_agent: false
  daemonset_l3_agent: false
  daemonset_lb_agent: false
  daemonset_metadata_agent: false
  daemonset_ovs_agent: false
